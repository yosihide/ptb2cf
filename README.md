# ptb2cf
This code approximates Penn Treebank (PTB) graph-structured representations by trees.
This is based on [PTB Graph Parsing with Tree Approximation](https://www.aclweb.org/anthology/P19-1530/) (ACL 2019 short paper) and [Parsing Gapping Constructions Based on Grammatical and Semantic Roles](https://www.aclweb.org/anthology/2020.emnlp-main.218/) (EMNLP 2020 short paper).

To use this code, install [SBCL](http://www.sbcl.org/) and [cl-ppcre](https://edicl.github.io/cl-ppcre/).

## Sample code (ACL 2019)
The following code is a sample of converting PTB graphs into PTB augmented trees.
```
(require :asdf)
(asdf:load-system :ptb2cf)
(use-package :ptb2cf)

(ptb->cf :ptb "/corpus/02-21.mrg" :cf "/data/02-21.aug" :dictionary "/data/dict")
```
This code reads PTB graphs from the file specified by :ptb, and writes PTB augmented trees to the file specified by :cf.
Empty elements are encoded based on the file specified by :dictionary.
If the file does not exist, ptb->cf automatically generates it.

To recover PTB graphs from PTB augmented trees, run the following code.
Here, the file "23.aug" has test trees generated by the parser trained using the PTB augmented trees.
```
(cf->ptb :cf "/data/23.aug" :ptb "/data/23.mrg" :dictionary "/data/dict")
```

## Sample code (EMNLP 2020)
The following code is a sample of annotating PTB trees for gapping constructions.
```
(require :asdf)
(asdf:load-system :ptb2cf)
(use-package :ptb2cf)

(ptb->cf :ptb "/corpus/02-21.mrg" :cf "/data/02-21.gap" :nld? nil :gap? t)
```

To co-index remnants with their corresponding correlates in the annotated trees, run the following code.
```
(cf->ptb :cf "/data/23.gap" :ptb "/data/23.mrg")
```
